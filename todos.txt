================================================================================
CreditTimeline (ctview2) - Implementation Roadmap
================================================================================

This file tracks the full implementation timeline for the CreditTimeline app.
Future LLM sessions should read this file to understand what's been done and
what comes next.
It should represent the current status of the project and you must keep this document up to date at all times.

Whenever you complete a task in this list you must mark it as completed with a x in the box.
When an entire phase is completed mark the phase as completed in the phase heading. 
The user will move the completed tasks to todos-completed.txt (do not consume this document unless you require historical context on why something was done)

Whenever designing or implementing features or functionality or bug fixes the below ADRs must be respected and complied with.
================================================================================
ARCHITECTURE DECISIONS
================================================================================

AD-001: TypeScript full-stack with SvelteKit
  - Single language across backend and frontend
  - SvelteKit serves both API routes and UI from one process
  - adapter-node for Docker deployment

AD-002: Drizzle ORM with SQLite (better-sqlite3)
  - SQLite as the storage backend via better-sqlite3
  - Schema-as-code matches spec SQL DDL exactly

AD-003: Ajv for JSON Schema validation
  - Draft 2020-12 with cross-file $ref support
  - Compiled validator for fast repeated validation
  - Two schema files: main schema + enums

AD-004: pnpm monorepo with three packages
  - @ctview/core: pure TS library (no web deps)
  - @ctview/web: SvelteKit application
  - @ctview/sdk: TypeScript HTTP client (zero runtime deps)
  - Core can be imported by future CLI tools

AD-005: Single Docker container
  - SQLite volume mount for data persistence
  - Multi-stage build for small image size

AD-006: No authentication by default
  - Personal vault, network-level access control
  - Optional INGEST_API_KEY for ingestion endpoint
  - CSRF via SvelteKit's built-in origin checking

AD-007: API-first design for external client support
  - SvelteKit API routes are the canonical interface for all data operations
  - All /api/v1/* routes MUST return JSON and work for any HTTP client (mobile
    apps, CLI tools, third-party integrations, browser fetch)
  - The full container (including frontend) is the deployment unit — external
    clients connect to the same running instance
  - CORS must be configurable so cross-origin clients can call the API
  - All API routes must have consistent error response shapes, proper HTTP
    status codes, and be documented via OpenAPI spec
  - API versioning via URL prefix (/api/v1/) is already in place — maintain
    this convention for all future endpoints
  - SvelteKit page load functions (+page.server.ts) should call the same query
    logic that API routes use, ensuring feature parity between the UI and
    external consumers. Shared query functions should live in @ctview/core or
    a shared lib, not be duplicated between page loads and API routes
  - Future: a lightweight @ctview/sdk package can wrap the HTTP API for
    TypeScript consumers

AD-008: Zod for runtime validation at system boundaries
  - Ajv handles JSON Schema validation of credit file payloads (AD-003)
  - Zod handles everything else at runtime boundaries:
    - Environment variable parsing and validation at startup
    - API request body/query parameter validation
    - Configuration object shapes
    - Response type narrowing
  - This dual-validation approach gives the best of both worlds:
    - Ajv for spec-compliant schema validation (JSON Schema draft 2020-12)
    - Zod for ergonomic TypeScript-native validation with inference






================================================================================
FUTURE IDEAS (UNSCHEDULED)
================================================================================

- CLI tool for importing credit reports from command line
  (this is a key motivator for @ctview/core being framework-independent)
- Browser extension for scraping credit reports directly
 - Can support creditkarma, clearscore, checkmyfile, experian credit expert and generic page scraping for unsupported providers.
 
- PDF parser adapter (Equifax statutory report)
- HTML scraper adapter (TransUnion via ClearScore)
- Notification system (email/webhook on score changes)
- Multi-subject support (household members)
- Plugin system for custom analysis
- Import diff view: side-by-side comparison showing what changed between
  two consecutive imports for the same subject (new tradelines, closed
  accounts, balance movements, score changes)


Later:
- Mobile app consuming the API (AD-007 ensures API is ready for this)
- Webhook system: push notifications to external URLs when anomalies are
  detected or new imports are processed
